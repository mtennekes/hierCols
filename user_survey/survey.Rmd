---
title: Hierarchische kleurenpaletten
author: 
 - Martijn Tennekes
 - Edwin de Jonge
---

Hierarchische kleurschalen
========================================================

We willen graag het gebruik van kleuren om classificatiestructuren
te verduidelijken onderzoeken.

We hebben zo meteen een aantal vragen voor je. We verwachten dat het niet meer
dan 5 minuten van je kostbare tijd kost.

Alle gebruikte __classificaties__ en voorbeelden zijn __fictief__! 

Alvast hartelijk dank voor je medewerking!

```{r initializatie, echo=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)
library(treemap)
library(igraph)

#source("R/sbi_example.R")
# load the data

# groepnummer (we hebben twee verschillende groepen)
group <- 1
set.seed(42)


generate_tree <- function(N = 21, children=4){
    g <- graph.tree(N, children=children)
    labels <- sample(letters, size=N)
    values <- runif(N)+0.5
    
    V(g)$label <- labels
    V(g)$value <- values
    g
}

tree2df <- function(g, labels=V(g)$label, values=V(g)$value){
    A <- get.adjacency(g)    
    dimnames(A) <- list(parent=labels, node=labels)
    
    N <- length(V(g))
    
    # get parents
    nbh <- neighborhood(g, order=3, mode="in")[6:21]
    
    #turn into dataframe
    df <- apply(t(sapply(nbh, rev)), 2, function(x) labels[x])
    df <- cbind(as.data.frame(df), value=values[6:21])
    df
}

g1 <- generate_tree()
df1 <- tree2df(g1)

g2 <- generate_tree()
df2 <- tree2df(g2)

g3 <- generate_tree()
df3 <- tree2df(g3)

g4 <- generate_tree()
df4 <- tree2df(g4)

g5 <- generate_tree()
df5 <- tree2df(g5)

g6 <- generate_tree()
df6 <- tree2df(g6)
#V(g)$color <- "red"
```

Hieronder zie je een zogenaamde treemap die de omzet per branch weergeeft.
Om het gebruik van voorkennis uit te sluiten coderen we de branches met kleine 
letters. Let op deze codes zijn lukraak gekozen en hebbben niets te maken met
SBI codes.

```{r treemap1}
treemap(df1, names(df1)[1:3], vSize="value", vColor=names(df1)[2], type="categorical", position.legend="none")
```

Welke branch is meer verwant met a?

- b
- c

```{r treemap2}
treemap(df2, names(df2)[1:3], vSize="value", position.legend="none")
```

Welke categorie is meer verwant met E?

- F
- G

```{r graph1}
plot(g3)
```

```{r graph2}
plot(g4)
```


